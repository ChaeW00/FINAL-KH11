<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="team">
    <!-- Insert 팀생성 -->
    <insert id="add" parameterType="TeamDto">
        INSERT INTO team(team_no, team_name, team_day, team_time, team_city, team_location, team_gender, team_age, team_level)
        VALUES(team_seq.nextval, #{teamName}, #{teamDay}, #{teamTime}, #{teamCity}, #{teamLocation}, #{teamGender}, #{teamAge}, #{teamLevel})
    </insert>
	
    <!-- Select 팀 전체조회-->
	<select id="selectList" resultType="TeamDto">
    	SELECT * FROM team order by team_no asc
	</select>

    <!-- Select -->
    <select id="selectList" resultType="TeamDto" parameterType="int" >
        SELECT * FROM team WHERE team_no = #{teamNo}
    </select>

    <!-- Update -->
    <update id="edit" parameterType="TeamDto">
        UPDATE teams SET
            teamName = #{teamName},
            teamDay = #{teamDay},
            teamTime = #{teamTime},
            teamCity = #{teamCity},
            teamLocation = #{teamLocation},
            teamGender = #{teamGender},
            teamAge = #{teamAge},
            teamLevel = #{teamLevel},
            teamWin = #{teamWin},
            teamLose = #{teamLose},
            teamSchedule = #{teamSchedule}
        WHERE teamNo = #{teamNo}
    </update>

    <!-- Delete -->
    <delete id="remove" parameterType="int">
        DELETE FROM teams WHERE teamNo = #{teamNo}
    </delete>
    
    <!--  팀매칭이 잡혔을 경우 스케쥴 업데이트 -->
	<update id="schedule" parameterType="TeamDto">
    	UPDATE team SET
        team_schedule = #{teamSchedule}
    	WHERE team_no = #{teamNo}
	</update>
	
	<!--  전적 기록 후 바뀐 팀기록 -->
	<update id="record" parameterType="TeamDto">
    	UPDATE teams SET
        team_win = #{teamWin},
        team_lose = #{teamLose}
    	WHERE team_no = #{teamNo}
</update>
</mapper>